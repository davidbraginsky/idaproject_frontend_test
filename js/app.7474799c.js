(function(){"use strict";var e={9208:function(e,t,i){var r=i(9242),n=i(3396);const a={class:"container"};function l(e,t,i,r,l,o){const s=(0,n.up)("HeaderComp"),c=(0,n.up)("MainComp");return(0,n.wg)(),(0,n.iD)("div",a,[(0,n.Wm)(s,{onFilterChange:r.filterChangeHandler},null,8,["onFilterChange"]),(0,n.Wm)(c,{filterOption:r.filterOption},null,8,["filterOption"])])}var o=i(4870);const s=e=>((0,n.dD)("data-v-095db24f"),e=e(),(0,n.Cn)(),e),c={class:"header row"},u=s((()=>(0,n._)("h2",{class:"heading"},"Добавление товара",-1))),m={class:"custom-select"},d=s((()=>(0,n._)("option",{value:"default"},"По умолчанию",-1))),p=s((()=>(0,n._)("option",{value:"mintomax"},"По цене min",-1))),v=s((()=>(0,n._)("option",{value:"maxtomin"},"По цене max",-1))),f=s((()=>(0,n._)("option",{value:"alphabetically"},"По наименованию",-1))),_=[d,p,v,f],g=s((()=>(0,n._)("div",{class:"custom-arrow"},null,-1)));function b(e,t,i,a,l,o){return(0,n.wg)(),(0,n.iD)("header",c,[u,(0,n._)("div",m,[(0,n.wy)((0,n._)("select",{class:"filter","onUpdate:modelValue":t[0]||(t[0]=e=>a.filterOption=e),onChange:t[1]||(t[1]=t=>e.$emit("filterChange",a.filterOption))},_,544),[[r.bM,a.filterOption]]),g])])}var h={setup(){const e=(0,o.iH)("default");return{filterOption:e}}},w=i(89);const y=(0,w.Z)(h,[["render",b],["__scopeId","data-v-095db24f"]]);var k=y,H=i(7139);const C={class:"content"},D={key:0,class:"boxContainer"},F={class:"box"};function O(e,t,i,a,l,o){const s=(0,n.up)("ItemForm"),c=(0,n.up)("GalleryComp");return(0,n.wg)(),(0,n.iD)("main",C,[(0,n.Wm)(s,{onDbsuccess:a.successHandler},null,8,["onDbsuccess"]),(0,n.Wm)(c,{onDbsuccess:a.successHandler,filterOption:i.filterOption},null,8,["onDbsuccess","filterOption"]),(0,n.Wm)(r.uT,{name:"fade"},{default:(0,n.w5)((()=>[a.isVisible?((0,n.wg)(),(0,n.iD)("div",D,[(0,n._)("p",F,(0,H.zw)(a.boxText),1)])):(0,n.kq)("",!0)])),_:1})])}const I=e=>((0,n.dD)("data-v-57ac301c"),e=e(),(0,n.Cn)(),e),x={class:"itemForm"},E={class:"inputForm__field"},M=I((()=>(0,n._)("label",{class:"itemForm__required",for:"formItem_title"},"Наименование товара",-1))),L={class:"inputForm__field"},T=I((()=>(0,n._)("label",{for:"formItem_description"},"Описание товара",-1))),R={class:"inputForm__field"},j=I((()=>(0,n._)("label",{class:"itemForm__required",for:"formItem_link"},"Ссылка на изображение товара",-1))),z={class:"inputForm__field"},P=I((()=>(0,n._)("label",{class:"itemForm__required",for:"formItem_price"},"Цена товара",-1))),V=["disabled"];function W(e,t,i,a,l,o){return(0,n.wg)(),(0,n.iD)("div",x,[(0,n._)("form",{ref:"formRef",onSubmit:t[4]||(t[4]=(0,r.iM)(((...e)=>a.submitHandler&&a.submitHandler(...e)),["prevent"])),onKeyup:t[5]||(t[5]=(...e)=>a.checkForm&&a.checkForm(...e)),autocomplete:"off"},[(0,n._)("div",E,[M,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.itemTitle=e),ref:"itemTitleRef",type:"text",placeholder:"Введите наименование товара",id:"formItem_title"},null,512),[[r.nr,a.itemTitle]]),(0,n._)("p",{ref:"itemTitleErrorRef",class:"itemForm__errorMsg"},(0,H.zw)(a.titleErrorMsg),513)]),(0,n._)("div",L,[T,(0,n.wy)((0,n._)("textarea",{ref:"itemDescriptionRef","onUpdate:modelValue":t[1]||(t[1]=e=>a.itemDescription=e),id:"formItem_description",cols:"30",rows:"10",placeholder:"Введите Описание товара"},null,512),[[r.nr,a.itemDescription]]),(0,n._)("p",{ref:"itemDescriptionErrorRef",class:"itemForm__errorMsg"},(0,H.zw)(a.descriptionErrorMsg),513)]),(0,n._)("div",R,[j,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.itemLink=e),ref:"itemLinkRef",type:"text",placeholder:"Введите ссылку",id:"formItem_link"},null,512),[[r.nr,a.itemLink]]),(0,n._)("p",{ref:"itemLinkErrorRef",class:"itemForm__errorMsg"},(0,H.zw)(a.linkErrorMsg),513)]),(0,n._)("div",z,[P,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>a.itemPrice=e),type:"number",min:"0",placeholder:"Введите цену",id:"formItem_price"},null,512),[[r.nr,a.itemPrice]])]),(0,n._)("button",{type:"submit",class:"btn",disabled:!a.isCompleted},"Добавить товар",8,V)],544)])}var Z=i(6035),q=i(4275);const S={apiKey:"AIzaSyDGkp4qBPaOCDl6-FMCz2LqKuFayevlEEE",authDomain:"idaproject-19650.firebaseapp.com",projectId:"idaproject-19650",storageBucket:"idaproject-19650.appspot.com",messagingSenderId:"1014754383925",appId:"1:1014754383925:web:8a9beccc3c6794137d797c"};(0,q.ZF)(S);const U=(0,Z.ad)();var B=U,G={emits:["dbsuccess"],name:"ItemForm",setup(e,t){let i=!1,r=!1,n=!1;const a=/[<>{};]/gi,l=(0,o.iH)(!1),s=(0,o.iH)(null),c=(0,o.iH)(null),u=(0,o.iH)(null),m=(0,o.iH)(null),d=(0,o.iH)("empty string"),p=(0,o.iH)(null),v=(0,o.iH)(null),f=(0,o.iH)(null),_=(0,o.iH)("empty string"),g=(0,o.iH)(null),b=(0,o.iH)(null),h=(0,o.iH)(null),w=(0,o.iH)("empty string"),y=(0,o.iH)(null),k=(e,t)=>{e.classList.add("error"),t.classList.add("itemForm__errorMsg--active")},H=()=>{u.value.classList.remove("error"),v.value.classList.remove("error"),b.value.classList.remove("error"),m.value.classList.remove("itemForm__errorMsg--active"),f.value.classList.remove("itemForm__errorMsg--active"),h.value.classList.remove("itemForm__errorMsg--active")},C=()=>{s.value.reset(),c.value=null,p.value=null,y.value=null,g.value=null,i=!1,r=!1,n=!1},D=()=>{c.value&&p.value&&y.value?l.value=!0:l.value=!1},F=(e,t)=>{if(a.test(c.value))return d.value="Поле содержит недействительные символы",void k(e,t);i=!0},O=(e,t)=>{if(/[<>{};]/gi.test(g.value))return w.value="Поле содержит недействительные символы",void k(e,t);n=!0},I=(e,t)=>{if(a.test(p.value))return _.value="Поле содержит недействительные символы",void k(e,t);r=!0},x=()=>{const e=(0,Z.hJ)(B,"items");(0,Z.ET)(e,{imgPath:p.value,altText:"default alt text for picture",title:c.value,description:g.value,price:y.value,created_at:(new Date).getTime()}),l.value=!1,t.emit("dbsuccess","Товар добавлен успешно")},E=()=>{F(u.value,m.value),O(b.value,h.value),I(v.value,f.value),i&&r&&n&&(H(),x())},M=()=>{E(),C()};return{isCompleted:l,titleErrorMsg:d,linkErrorMsg:_,descriptionErrorMsg:w,submitHandler:M,checkForm:D,formRef:s,itemTitle:c,itemLink:p,itemPrice:y,itemDescription:g,itemTitleRef:u,itemTitleErrorRef:m,itemDescriptionRef:b,itemDescriptionErrorRef:h,itemLinkRef:v,itemLinkErrorRef:f}}};const K=(0,w.Z)(G,[["render",W],["__scopeId","data-v-57ac301c"]]);var J=K;const A={class:"item__pictureContainer"},N=["src","alt"],Y={class:"item__content"},$={class:"item__title"},Q={class:"item__description"},X={class:"item__price"},ee=["onClick"],te={key:1},ie={key:1};function re(e,t,i,a,l,o){const s=(0,n.up)("Spinner");return(0,n.wg)(),(0,n.iD)("div",{class:(0,H.C_)(["gallery-wrapper",{loaded:a.hasLoaded}])},[(0,n.Wm)(r.uT,{name:"switch",mode:"out-in"},{default:(0,n.w5)((()=>[a.items.length?((0,n.wg)(),(0,n.j4)(r.W3,{key:0,tag:"div",name:"item",class:"gallery",appear:""},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.items,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"item",key:e.id},[(0,n._)("div",A,[(0,n._)("img",{class:"item__picture",src:e.imgPath,alt:e.altText},null,8,N)]),(0,n._)("div",Y,[(0,n._)("p",$,(0,H.zw)(e.title),1),(0,n._)("p",Q,(0,H.zw)(e.description),1),(0,n._)("p",X,(0,H.zw)(e.price)+" руб.",1)]),(0,n._)("div",{class:"item__deleteBtn",onClick:t=>a.deleteItem(e)},null,8,ee)])))),128))])),_:1})):((0,n.wg)(),(0,n.iD)("div",te,[a.hasLoaded?((0,n.wg)(),(0,n.iD)("p",ie,"Добавьте товар...")):((0,n.wg)(),(0,n.j4)(s,{key:0}))]))])),_:1})],2)}const ne=e=>((0,n.dD)("data-v-7fa1205e"),e=e(),(0,n.Cn)(),e),ae={class:"spinner-wrapper"},le=ne((()=>(0,n._)("div",{class:"lds-spinner"},[(0,n._)("div"),(0,n._)("div"),(0,n._)("div"),(0,n._)("div"),(0,n._)("div"),(0,n._)("div"),(0,n._)("div"),(0,n._)("div"),(0,n._)("div"),(0,n._)("div"),(0,n._)("div"),(0,n._)("div")],-1))),oe=[le];function se(e,t,i,r,a,l){return(0,n.wg)(),(0,n.iD)("div",ae,oe)}var ce={name:"Spinner"};const ue=(0,w.Z)(ce,[["render",se],["__scopeId","data-v-7fa1205e"]]);var me=ue,de={emits:["dbsuccess"],name:"GalleryComp",props:["filterOption"],components:{Spinner:me},setup(e,t){const i=(0,o.iH)([]),r=(0,o.iH)(!1),a=()=>{i.value.forEach((e=>{e.price=new Intl.NumberFormat("fr-FR").format(e.price)}))},l=()=>{i.value.forEach((e=>{e.price=Number(e.price.replace(/\s/g,""))}))},s=e=>{"mintomax"===e?(l(),i.value.sort(((e,t)=>e.price-t.price)),a()):"maxtomin"===e?(l(),i.value.sort(((e,t)=>t.price-e.price)),a()):"alphabetically"===e?i.value.sort(((e,t)=>e.title.localeCompare(t.title))):i.value.sort(((e,t)=>t.created_at-e.created_at))},c=({id:e})=>{const i=(0,Z.JU)(B,"items",e);(0,Z.oe)(i).then((()=>{t.emit("dbsuccess","Товар успешно удалён")}))},u=()=>{const t=(0,Z.hJ)(B,"items");(0,Z.cf)(t,(t=>{i.value=[],t.docs.forEach((e=>{const t={...e.data(),id:e.id};i.value.push(t)})),r.value=!0,s(e.filterOption),a()}))};return(0,n.YP)(e,(()=>{s(e.filterOption)})),(0,n.bv)((()=>{u()})),{items:i,deleteItem:c,hasLoaded:r}}};const pe=(0,w.Z)(de,[["render",re],["__scopeId","data-v-567fb3a5"]]);var ve=pe,fe={name:"MainComp",props:["filterOption"],components:{ItemForm:J,GalleryComp:ve},setup(){const e=(0,o.iH)(!1),t=(0,o.iH)(null),i=()=>{e.value=!0,setTimeout((()=>{e.value=!1}),1500)},r=e=>{t.value=e,i()};return{isVisible:e,boxText:t,showBox:i,successHandler:r}}};const _e=(0,w.Z)(fe,[["render",O],["__scopeId","data-v-a11aace0"]]);var ge=_e,be={name:"App",components:{HeaderComp:k,MainComp:ge},setup(){const e=(0,o.iH)("default"),t=t=>{e.value=t};return{filterChangeHandler:t,filterOption:e}}};const he=(0,w.Z)(be,[["render",l],["__scopeId","data-v-0487053a"]]);var we=he;(0,r.ri)(we).mount("#app")}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,i),a.exports}i.m=e,function(){var e=[];i.O=function(t,r,n,a){if(!r){var l=1/0;for(u=0;u<e.length;u++){r=e[u][0],n=e[u][1],a=e[u][2];for(var o=!0,s=0;s<r.length;s++)(!1&a||l>=a)&&Object.keys(i.O).every((function(e){return i.O[e](r[s])}))?r.splice(s--,1):(o=!1,a<l&&(l=a));if(o){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[r,n,a]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,a,l=r[0],o=r[1],s=r[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(n in o)i.o(o,n)&&(i.m[n]=o[n]);if(s)var u=s(i)}for(t&&t(r);c<l.length;c++)a=l[c],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(u)},r=self["webpackChunkworkapp"]=self["webpackChunkworkapp"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=i.O(void 0,[998],(function(){return i(9208)}));r=i.O(r)})();
//# sourceMappingURL=app.7474799c.js.map